window.__require=function e(t,o,n){function r(c,s){if(!o[c]){if(!t[c]){var p=c.split("/");if(p=p[p.length-1],!t[p]){var a="function"==typeof __require&&__require;if(!s&&a)return a(p,!0);if(i)return i(p,!0);throw new Error("Cannot find module '"+c+"'")}c=p}var u=o[c]={exports:{}};t[c][0].call(u.exports,function(e){return r(t[c][1][e]||e)},u,u.exports,e,t,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({bird:[function(e,t,o){"use strict";cc._RF.push(t,"3f842+QbhVCn5gGgYzC0Nsg","bird");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../const"),s=e("../events/bus"),p=e("../events/event-enum"),a=e("./game"),u=cc._decorator,l=u.ccclass,d=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.birdNode=null,t.rigidComp=null,t.gameComp=null,t.initPosition=null,t}return r(t,e),t.prototype.start=function(){this.rigidComp=this.birdNode.getComponent(cc.RigidBody),this.gameComp=this.getComponent(a.default),this.initPosition=this.birdNode.getPosition()},t.prototype.jump=function(){this.rigidComp.linearVelocity=cc.v2(0,300)},t.prototype.getReady=function(){this.birdNode.getComponent(cc.Animation).play("bird_float"),this.rigidComp.gravityScale=0},t.prototype.begin=function(){this.birdNode.getComponent(cc.Animation).play("bird_fly"),this.rigidComp.gravityScale=1},t.prototype.setActive=function(e){this.rigidComp.active=e,this.rigidComp.gravityScale=Number(e),this.rigidComp.linearVelocity=cc.v2(0,0)},t.prototype.reset=function(){this.birdNode.setPosition(this.initPosition),this.setActive(!0),this.rigidComp.angularVelocity=0,this.birdNode.angle=0},t.prototype.update=function(){this.gameComp.gameState===c.GameState.Playing&&this.birdNode.x<-(c.BGWidth+2)/2&&s.default.emit(p.default.BirdLeaveBG)},i([d(cc.Node)],t.prototype,"birdNode",void 0),i([l],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../const":"const","../events/bus":"bus","../events/event-enum":"event-enum","./game":"game"}],bus:[function(e,t,o){"use strict";cc._RF.push(t,"cf1e4lJPUpB0ZRjQPOuLaeM","bus"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=new cc.EventTarget,cc._RF.pop()},{}],collide:[function(e,t,o){"use strict";cc._RF.push(t,"7e312nkMu9Hm66OjbNizkPO","collide");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./events/bus"),s=e("./events/event-enum"),p=cc._decorator.ccclass,a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onBeginContact=function(){c.default.emit(s.default.BirdCollide)},i([p],t)}(cc.Component);o.default=a,cc._RF.pop()},{"./events/bus":"bus","./events/event-enum":"event-enum"}],const:[function(e,t,o){"use strict";cc._RF.push(t,"097e3dSOuhE6JIUX4GkNplX","const"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameMode=o.GameState=o.landMoveDistance=o.moveSpeed=o.birdWidth=o.pipeWidth=o.landWidth=o.landHeight=o.BGHeight=o.BGWidth=void 0,o.BGWidth=288,o.BGHeight=512,o.landHeight=112,o.landWidth=672,o.pipeWidth=52,o.birdWidth=34,o.moveSpeed=128,o.landMoveDistance=o.landWidth-o.BGWidth,function(e){e[e.Before=0]="Before",e[e.Ready=1]="Ready",e[e.Playing=2]="Playing",e[e.End=3]="End"}(o.GameState||(o.GameState={})),function(e){e.Normal="normal",e.Idiot="idiot"}(o.GameMode||(o.GameMode={})),cc._RF.pop()},{}],"event-enum":[function(e,t,o){"use strict";var n;cc._RF.push(t,"933d7KB6jJM96oLNotlMWkZ","event-enum"),Object.defineProperty(o,"__esModule",{value:!0}),function(e){e.BirdCollide="bird_collide",e.BirdLeaveBG="bird_leave_bg",e.BirdFlyOverPipe="bird_fly_over_pipe"}(n||(n={})),o.default=n,cc._RF.pop()},{}],game:[function(e,t,o){"use strict";cc._RF.push(t,"9bdd2b1T4lFiqdd5AuWlLzs","game");var n,r,i,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),s=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var p=e("./bird"),a=e("../const"),u=e("../events/bus"),l=e("../events/event-enum"),d=e("./land"),f=e("./pipe"),h=e("./score"),y=e("../util"),m=cc._decorator,_=m.ccclass,v=m.property,b=null!==(i=null===(r=y.getQuery())||void 0===r?void 0:r.mode)&&void 0!==i?i:a.GameMode.Normal,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.background=null,t.beforeContainer=null,t.readyNode=null,t.pipeUp=null,t.finishedContainer=null,t.playNode=null,t.gameState=a.GameState.Before,t._pm=cc.director.getPhysicsManager(),t.pipeComp=null,t.birdComp=null,t.scoreComp=null,t.landComp=null,t}return c(t,e),t.prototype.onLoad=function(){this._pm.enabled=!0,this._pm.gravity=cc.v2(0,0)},t.prototype.start=function(){this.pipeComp=this.getComponent(f.default),this.birdComp=this.getComponent(p.default),this.scoreComp=this.getComponent(h.default),this.landComp=this.getComponent(d.default),this.addListeners()},t.prototype.addListeners=function(){this.background.on(cc.Node.EventType.TOUCH_START,this._onBGClick,this),this.playNode.on(cc.Node.EventType.TOUCH_START,this._onPlayNodeClick,this),u.default.on(l.default.BirdCollide,this.onBirdCollide,this),u.default.on(l.default.BirdLeaveBG,this.onBirdLeaveBG,this),u.default.on(l.default.BirdFlyOverPipe,this.scoreComp.addScore,this.scoreComp)},t.prototype.removeAllListeners=function(){this.background.off(cc.Node.EventType.TOUCH_START,this._onBGClick,this),this.playNode.off(cc.Node.EventType.TOUCH_START,this._onPlayNodeClick,this),u.default.off(l.default.BirdCollide,this.onBirdCollide,this),u.default.off(l.default.BirdLeaveBG,this.onBirdLeaveBG,this),u.default.off(l.default.BirdFlyOverPipe,this.scoreComp.addScore,this.scoreComp)},t.prototype._onBGClick=function(){this.gameState===a.GameState.Before?(this.beforeContainer.active=!1,this._pm.gravity=cc.v2(0,-800),this.getReady()):this.gameState===a.GameState.Ready?(this.startGame(),this.birdComp.jump()):this.gameState===a.GameState.Playing&&this.birdComp.jump()},t.prototype._onPlayNodeClick=function(){this.finishedContainer.y=400,this.resetGame(),this.getReady()},t.prototype.getReady=function(){this.gameState=a.GameState.Ready,this.birdComp.getReady(),this.landComp.begin(),this.readyNode.active=!0},t.prototype.startGame=function(){this.gameState=a.GameState.Playing,this.readyNode.active=!1,this.birdComp.begin(),this.scoreComp.begin(),this.pipeComp.begin()},t.prototype.resetGame=function(){this.pipeComp.reset(),this.birdComp.reset(),this.scoreComp.reset(),this.landComp.reset()},t.prototype.onBirdCollide=function(){this.gameState===a.GameState.Playing&&b===a.GameMode.Normal&&this.endGame()},t.prototype.onBirdLeaveBG=function(){this.gameState===a.GameState.Playing&&b===a.GameMode.Idiot&&this.endGame()},t.prototype.endGame=function(){this.gameState=a.GameState.End,cc.Tween.stopAll(),this.pipeComp.end(),this.finishedContainer.getComponent(cc.Animation).play(),this.scoreComp.end()},t.prototype.onDestroy=function(){this.removeAllListeners()},s([v(cc.Node)],t.prototype,"background",void 0),s([v(cc.Node)],t.prototype,"beforeContainer",void 0),s([v(cc.Node)],t.prototype,"readyNode",void 0),s([v(cc.Node)],t.prototype,"pipeUp",void 0),s([v(cc.Node)],t.prototype,"finishedContainer",void 0),s([v(cc.Node)],t.prototype,"playNode",void 0),s([_],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../const":"const","../events/bus":"bus","../events/event-enum":"event-enum","../util":"util","./bird":"bird","./land":"land","./pipe":"pipe","./score":"score"}],land:[function(e,t,o){"use strict";cc._RF.push(t,"a8763fFBcdMhKooRIN5aYjm","land");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../const"),s=cc._decorator,p=s.ccclass,a=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.landNode=null,t.moveLandTween=null,t._initPosition=null,t}return r(t,e),t.prototype.start=function(){this._initPosition=this.landNode.getPosition()},t.prototype.begin=function(){var e=cc.tween().by(c.landMoveDistance/c.moveSpeed,{x:-c.landMoveDistance}),t=cc.tween().to(0,{x:192});this.moveLandTween=cc.tween(this.landNode).sequence(e,t).repeatForever().start()},t.prototype.end=function(){},t.prototype.reset=function(){this.landNode.setPosition(this._initPosition)},i([a(cc.Node)],t.prototype,"landNode",void 0),i([p],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../const":"const"}],pipe:[function(e,t,o){"use strict";cc._RF.push(t,"68856VEtRVLm7WXatVI/ygX","pipe");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.PipeType=void 0;var c,s=e("../const"),p=e("../events/bus"),a=e("../events/event-enum"),u=cc._decorator,l=u.ccclass,d=u.property;(function(e){e[e.Up=0]="Up",e[e.Down=1]="Down"})(c=o.PipeType||(o.PipeType={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pipe=null,t.pipeContainer=null,t.pool=null,t}return r(t,e),t.prototype.start=function(){this.initNodePool()},t.prototype.initNodePool=function(){this.pool=new cc.NodePool;for(var e=0;e<8;e++)this.pool.put(cc.instantiate(this.pipe))},t.prototype.begin=function(){this.schedule(this.handlePipe,1.5,cc.macro.REPEAT_FOREVER)},t.prototype.end=function(){this.unscheduleAllCallbacks()},t.prototype.generateNewPipe=function(e){var t=this.pool.get();return e===c.Down?t.scaleY=-1:t.scaleY=1,t},t.prototype.handlePipe=function(){var e=this.getRandNumber(100,200),t=s.BGHeight/2-30,o=-s.BGHeight/2+s.landHeight+30+e,n=this.getRandNumber(o,t),r=n-e,i=this.generateNewPipe(c.Up),u=this.generateNewPipe(c.Down);this.putPipe(i,n),this.putPipe(u,r);var l=(s.BGWidth/2+s.pipeWidth)/s.moveSpeed;this.scheduleOnce(function(){p.default.emit(a.default.BirdFlyOverPipe)},l)},t.prototype.putPipe=function(e,t){var o=this;e.setPosition(170,t),this.pipeContainer.addChild(e);var n=s.BGWidth+s.pipeWidth,r=cc.tween().by(n/s.moveSpeed,{x:-n}),i=cc.tween().call(function(){o.pool.put(e)});cc.tween(e).then(r).then(i).start()},t.prototype.getRandNumber=function(e,t){return e+Math.random()*(t-e)},t.prototype.reset=function(){this.pipeContainer.removeAllChildren(),this.initNodePool()},t.prototype.onDestroy=function(){this.end(),this.pool.clear(),this.unscheduleAllCallbacks()},i([d(cc.Node)],t.prototype,"pipe",void 0),i([d(cc.Node)],t.prototype,"pipeContainer",void 0),i([l],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../const":"const","../events/bus":"bus","../events/event-enum":"event-enum"}],score:[function(e,t,o){"use strict";cc._RF.push(t,"f7af1e+2MVHGLBNsTCOXaGp","score");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c},c=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function c(e){try{p(n.next(e))}catch(t){i(t)}}function s(e){try{p(n.throw(e))}catch(t){i(t)}}function p(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(c,s)}p((n=n.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var o,n,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return p([e,t])}}function p(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var p=e("../util"),a=cc._decorator,u=a.ccclass,l=a.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scoreNode=null,t.bestScoreNode=null,t.finishScoreNode=null,t.medalNode=null,t._scoreNumberFrames=null,t._medalFrames=null,t._score=0,t.bestScore=0,t}return r(t,e),Object.defineProperty(t.prototype,"score",{get:function(){return this._score},set:function(e){this._score=e,this.renderScore(this.scoreNode,e)},enumerable:!1,configurable:!0}),t.prototype.start=function(){return c(this,void 0,void 0,function(){var e,t;return s(this,function(o){switch(o.label){case 0:return e=this,[4,p.loadDirResource("image/score_number",cc.SpriteFrame)];case 1:return e._scoreNumberFrames=o.sent(),this._scoreNumberFrames.sort(function(e,t){return Number(e.name.split("_")[1])-Number(t.name.split("_")[1])}),console.warn(this._scoreNumberFrames),this.renderScore(this.scoreNode,this.score),t=this,[4,p.loadDirResource("image/score_medal",cc.SpriteFrame)];case 2:return t._medalFrames=o.sent(),this._medalFrames.sort(function(e,t){return Number(e.name.split("_")[1])-Number(t.name.split("_")[1])}),[2]}})})},t.prototype.begin=function(){this.scoreNode.active=!0},t.prototype.addScore=function(){this.score++},t.prototype.getScore=function(){return this.score},t.prototype._getSplitScoreNumbers=function(e){if(0===e)return[0];for(var t=[],o=e;o;){var n=o%10;o=Math.floor(o/10),t.push(n)}return t.reverse()},t.prototype.renderScore=function(e,t){for(var o=this,n=this._getSplitScoreNumbers(t),r=n.length-e.childrenCount,i=0;i<Math.abs(r);i++)if(r>0){var c=new cc.Node("score_number");c.addComponent(cc.Sprite),e.addChild(c)}else r<0&&e.removeChild(e.children[0]);n.forEach(function(t,n){e.children[n].getComponent(cc.Sprite).spriteFrame=o._scoreNumberFrames[t]})},t.prototype.renderMedal=function(){this.medalNode.getComponent(cc.Sprite).spriteFrame=this._medalFrames[this._getMedalLevel()]},t.prototype.renderScorePanelContent=function(){this.renderScore(this.finishScoreNode,this.score),this.renderScore(this.bestScoreNode,this.bestScore),this.renderMedal()},t.prototype.end=function(){this.bestScore=Math.max(this.bestScore,this.score),this.renderScorePanelContent(),this.scoreNode.active=!1},t.prototype.reset=function(){this.score=0},t.prototype._getMedalLevel=function(){return this.score<10?0:this.score<50?1:this.score<200?2:this.score<800?3:void 0},i([l(cc.Node)],t.prototype,"scoreNode",void 0),i([l(cc.Node)],t.prototype,"bestScoreNode",void 0),i([l(cc.Node)],t.prototype,"finishScoreNode",void 0),i([l(cc.Node)],t.prototype,"medalNode",void 0),i([u],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../util":"util"}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t){"use strict";cc._RF.push(t,"4d7d3MGF0JC/J0HAz4E6gQP","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}],util:[function(e,t,o){"use strict";cc._RF.push(t,"37f7acn0SRKhr5qgr+u+v16","util"),Object.defineProperty(o,"__esModule",{value:!0}),o.getQuery=o.loadDirResource=void 0,o.loadDirResource=function(e,t){return new Promise(function(o,n){cc.resources.loadDir(e,t,null,function(e,t){e&&n(e),o(t)})})},o.getQuery=function(){for(var e=document.location.search.substring(1).split("&"),t={},o=0;o<e.length;o++){var n=e[o].split("="),r=n[0],i=n[1];t[r]=i}return t},cc._RF.pop()},{}]},{},["use_v2.1-2.2.1_cc.Toggle_event","collide","const","bird","game","land","pipe","score","bus","event-enum","util"]);